(window.webpackJsonp=window.webpackJsonp||[]).push([[383],{646:function(t,e,a){"use strict";a.r(e);a(1);var s=a(6);Vue.use(s.a),Vue.use(s.b);var o={data:function(){return{form:new Form({employeEntryId:"",paymentStatus:"",monthlyPayment:"",reason:"",date:"",deduct:""}),employeeNames:{},salarySheetReports:{},recode:!0,workDay:"",date:{from:null,to:null,month:null,monthIndex:null,year:null},present:"",noRecode:!1}},props:{limit:{type:Number,default:2}},components:{MonthPicker:s.a,MonthPickerInput:s.b},mounted:function(){this.employeeNameList(),this.salarySheetReport(),this.getPaginateReport(),this.holidaySetupReport()},methods:{showDate:function(t){var e=this;this.date=t,axios.get("monthwiseSalarySheet/".concat(this.date.monthIndex,"/").concat(this.date.year)).then((function(t){e.salarySheetReports=t.data.salarySheetReports}))},clickForSalarySheet:function(){var t=this;axios.post("salarySheet",{monthIndex:this.date.monthIndex,year:this.date.year,monthInfo:this.date.month+","+this.date.year,mt:this.date.year+"-"+this.date.monthIndex+"-01"}).then((function(e){e.data.alreadyExit?Toast.fire({icon:"error",title:"This Month Salary Sheet Already Open"}):e.data.count?Toast.fire({icon:"error",title:"No more Employee"}):(axios.get("monthwiseSalarySheet/".concat(t.date.monthIndex,"/").concat(t.date.year)).then((function(e){t.salarySheetReports=e.data.salarySheetReports})),Toast.fire({icon:"success",title:"Successfully Open Salary Sheet"}))}))},employeeNameList:function(){var t=this;axios.get("/employeeName").then((function(e){t.employeeNames=e.data.employeeName}))},holidaySetupReport:function(){var t=this;axios.get("/holidaySetupReport").then((function(e){t.workDay=e.data.workingDay})),this.currentDateMonth=(new Date).toLocaleString().split(",")[0]},employeeAttendenceInfo:function(t){var e=this;axios.get("/employeeAttendanceInfo/".concat(t)).then((function(t){e.present=t.data.present}))},deductSalary:function(t){var e=this;axios.post("/salaryDeduct",{id:t,month:this.date.monthIndex,year:this.date.year,reason:this.form.reason,date:this.form.date,deduct:this.form.deduct,netamount:this.form.netamount}).then((function(t){Toast.fire({icon:"success",title:"Change Successfully"}),""==e.date.monthIndex?e.salarySheetReport():axios.get("monthwiseSalarySheet/".concat(e.date.monthIndex,"/").concat(e.date.year)).then((function(t){e.salarySheetReports=t.data.salarySheetReports}))}))},confirm:function(t){var e=this;""==this.date.monthIndex?axios.get("/salarySheetConfirm/".concat(t,"/0/0")).then((function(t){Toast.fire({icon:"success",title:"Status Change Successfully"}),e.salarySheetReport()})):axios.get("/salarySheetConfirm/".concat(t,"/").concat(this.date.monthIndex,"/").concat(this.date.year)).then((function(t){Toast.fire({icon:"success",title:"Status Change Successfully"}),axios.get("monthwiseSalarySheet/".concat(e.date.monthIndex,"/").concat(e.date.year)).then((function(t){e.salarySheetReports=t.data.salarySheetReports}))}))},salarySheetReport:function(){var t=this;axios.get("/salarySheet").then((function(e){t.salarySheetReports=e.data.salarySheetReports}))},getPaginateReport:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/salarySheet?page="+e).then((function(e){t.salarySheetReports=e.data.salarySheetReports}))},paymentStatus:function(t){var e=this;axios.get("/salaryPaymentStatus/"+t).then((function(t){Toast.fire({icon:"success",title:"Salary Payment Status Change Successfully"}),e.salarySheetReport()}))},serchEmployeeSalary:function(){var t=this;this.form.post("/serchEmployeeSalary").then((function(e){e.data.all?(t.recode=!0,t.noRecode=!1,t.salarySheetReport()):e.data.noRecode?(t.recode=!1,t.noRecode=!0):e.data.salarySheetReports&&(t.recode=!0,t.noRecode=!1,t.salarySheetReports=e.data.salarySheetReports)}))}}},n=a(0),r=Object(n.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("div",{staticClass:"card main-card  element-block-example"},[a("div",{staticClass:"card-header alert-info"},[a("h3",[a("button",{staticClass:"btn btn btn-outline-primary btn-shadow  btn-hover-shine",attrs:{onclick:"window.history.back()"}},[a("svg",{staticClass:"bi bi-arrow-left",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"}})])]),t._v(" Basic Salary Sheet ")])]),t._v(" "),a("div",{staticStyle:{margin:"auto",padding:"22px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 col-12"},[a("span",[t._v(" Select Month")]),t._v(" "),a("month-picker-input",{attrs:{"no-default":!0},on:{change:t.showDate}})],1),t._v(" "),a("div",{staticClass:"col-lg-6 col-12"},[a("span",[t._v("   ")]),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"mr-2 btn-wide btn-pill btn btn-hover-shine  btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.clickForSalarySheet()}}},[t._v("Open salary Sheet")])])])]),t._v(" "),a("div",{staticClass:"table-responsive bg-white p-3"},[a("table",{staticClass:"table table-hover table-bordered table-striped"},[t._m(0),t._v(" "),a("tbody",[t._l(t.salarySheetReports.data,(function(e,s){return a("tr",[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.shop_employee_name.userName))]),t._v(" "),a("td",[e.shop_employee_name.job_departments?a("span",[t._v(t._s(e.shop_employee_name.job_departments.jobDepartmentName))]):t._e()]),t._v(" "),a("td",[e.shop_employee_name.shop_employee_types?a("span",[t._v(t._s(e.shop_employee_name.shop_employee_types.shopEmployeeTypeName))]):t._e()]),t._v(" "),a("td",[t._v(t._s(e.grade_entry_list.gradeName))]),t._v(" "),a("td",[t._v(t._s(e.amount))]),t._v(" "),a("td",[t._v(t._s(e.deductAmount))]),t._v(" "),a("td",[t._v(t._s(e.netAmount))]),t._v(" "),a("td",[a("div",{staticClass:"dropdown"},[t._m(1,!0),t._v(" "),a("div",{staticClass:"dropdown-content"},[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#deduct"+e.employeeId},on:{click:function(a){return a.preventDefault(),t.employeeAttendenceInfo(e.employeeId)}}},[t._v("Salary Deduct")]),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.confirm(e.employeeId)}}},[t._v(" Confirm ")])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"deduct"+e.employeeId,tabindex:"-1",role:"dialog","aria-labelledby":"deduct"+e.employeeId,"aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2,!0),t._v(" "),a("div",{staticClass:"modal-body"},[a("span",{staticStyle:{color:"red"}},[t._v("Working Day: "+t._s(30-t.workDay))]),a("br"),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v("Present: "+t._s(t.present))]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Deduct Amount")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.deduct,expression:"form.deduct"}],staticClass:"form-control",attrs:{type:"text",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter Amount"},domProps:{value:t.form.deduct},on:{input:function(e){e.target.composing||t.$set(t.form,"deduct",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Reason")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.reason,expression:"form.reason"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.form.reason},on:{input:function(e){e.target.composing||t.$set(t.form,"reason",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v(" Date")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.date,expression:"form.date"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.form.date},on:{input:function(e){e.target.composing||t.$set(t.form,"date",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.deductSalary(e.employeeId)}}},[t._v("Save changes")])])])])])])])])})),t._v(" "),t.noRecode?a("tr",{staticClass:"text-center"},[a("td",{attrs:{colspan:"8"}},[t._v(" No Record Available ")])]):t._e()],2)])]),t._v(" "),t.recode?a("span",{staticClass:"card_footer"},[a("pagination",{attrs:{data:t.salarySheetReports,limit:t.limit},on:{"pagination-change-page":t.getPaginateReport}},[a("span",{attrs:{slot:"prev-nav"},slot:"prev-nav"},[t._v("< Previous")]),t._v(" "),a("span",{attrs:{slot:"next-nav"},slot:"next-nav"},[t._v("Next >")])])],1):t._e()])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"alert-info"},[a("th",[t._v("SN")]),t._v(" "),a("th",[t._v("Employee"),a("span",{staticClass:"textTransparent"},[t._v("_")]),t._v("Name")]),t._v(" "),a("th",[t._v("Department")]),t._v(" "),a("th",[t._v("Designation")]),t._v(" "),a("th",[t._v("Salary"),a("span",{staticClass:"textTransparent"},[t._v("_")]),t._v("Grade"),a("span",{staticClass:"textTransparent"},[t._v("_")]),t._v("Name")]),t._v(" "),a("th",[t._v("Salary"),a("span",{staticClass:"textTransparent"},[t._v("_")]),t._v("Grade"),a("span",{staticClass:"textTransparent"},[t._v("_")]),t._v("Amount")]),t._v(" "),a("th",[t._v("Deduct"),a("span",{staticClass:"textTransparent"},[t._v("_")]),t._v("Amount")]),t._v(" "),a("th",[t._v("Net"),a("span",{staticClass:"textTransparent"},[t._v("_")]),t._v("Amount")]),t._v(" "),a("th",[t._v("Action")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"dropbtn"},[e("i",{staticClass:"fa fa-cogs",attrs:{"aria-hidden":"true"}}),this._v("\nSelect Operation")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("Salary Deduct")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}],!1,null,null,null);e.default=r.exports}}]);