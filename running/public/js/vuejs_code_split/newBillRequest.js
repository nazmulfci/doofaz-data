(window.webpackJsonp=window.webpackJsonp||[]).push([[306],{906:function(t,a,n){"use strict";n.r(a);var e={data:function(){return{currencyRate:"",loading:!1,authInfos:[],userName:"",accountInfos:[],howManyBranch:!0,billRequestLists:[],mobileBankInfoStatus:0,bankInfoStatus:0,bankInformationAccountInfoStatus:0,available_balance_cash_status:!1,available_balance_cash_text:"",available_balance_text:"",available_balance_status:!1,submit_button_status:!0,available_button_status:!1,available_text:"",insufficent_cash_balance_text_status:!1,insufficent_bank_balance_text_status:!1,insufficent_balance_text_status:!1,insufficent_button:!1,submit_button:!0,shopBankAllDatas:[],corporateBankAccountTypes:[],mobileBankAccountTypes:[],paymentTypeLists:[],showBankTypeDatas:[],showBankNames:[],showBankAccounts:[],bankMoreInfo:[],showMonthLists:[],form:new Form({paymetMethod:"",amount:"",totalMonth:"1",bankDetils:"",paySlip:""})}},mounted:function(){this.getAccountInfoById(),this.getAuthInfo(),this.getCurrencyRate(),this.view(),this.showBankType(),this.shopBillMonthList()},methods:{view:function(){var t=this;axios.get("/shopBillRequestListAdmin/").then((function(a){t.billRequestLists=a.data.data}))},billApprove:function(t){var a=this;this.loading=!0,this.form.get("payBill/"+t).then((function(t){a.view(),a.loading=!1,axios.put("https://portal.safejob.net/api/newshopMonthly/"+a.authInfos.userName).then((function(t){})),Toast.fire({icon:"success",title:"Bill Request Approve."})})).catch((function(t){}))},billCencle:function(t){var a=this;axios.get("/shopBillRequestCancel/"+t).then((function(t){a.view()}))},billRequest:function(){var t=this;this.form.post("shopBillRequestEntry").then((function(a){Toast.fire({icon:"success",title:"Bill Request Successfull."}),t.form.reset()}))},getCurrencyRate:function(){var t=this;axios.get("getCurrencyRate").then((function(a){t.currencyRate=a.data.data,t.form.amount=a.data.data}))},getAuthInfo:function(){var t=this;fetch("getAuthInfo").then((function(t){return t.json()})).then((function(a){t.authInfos=a.data,t.userName=a.userName}))},changeImage:function(t){var a=this,n=t.target.files[0],e=new FileReader;e.onload=function(t){a.form.paySlip=t.target.result,console.log(t.target.result)},e.readAsDataURL(n)},getAccountInfoById:function(){var t=this;fetch("getAccountInfoById").then((function(t){return t.json()})).then((function(a){t.accountInfos=a.data}))},calculateBillAmount:function(){var t=this;axios.get("/getShopBillMonthListById/"+this.form.totalMonth).then((function(a){t.form.amount=t.currencyRate*t.form.totalMonth-a.data.data.discountAmount}))},shopBillMonthList:function(){var t=this;axios.get("/getShopBillMonthList").then((function(a){t.showMonthLists=a.data.data}))},showBankType:function(){var t=this;axios.get("/bankTypeEntryList").then((function(a){t.showBankTypeDatas=a.data.show}))},bankTypeIdCatch:function(){var t=this;axios.get("/companyBankNameList/"+this.form.bankTypeEntryId).then((function(a){t.showBankNames=a.data.show,1==t.form.bankTypeEntryId?(t.mobileBankInfoStatus=0,t.bankInfoStatus=1):(t.mobileBankInfoStatus=1,t.bankInfoStatus=0)}))},bankAccountIdCatch:function(){var t=this;axios.get("/companyBankAccountList/"+this.form.bankAccountId).then((function(a){1==t.form.bankTypeEntryId?t.form.bankDetils="A/C Name : "+a.data.data.accountName+"<br>A/C Number : "+a.data.data.accountNumber+"<br>Branch Name : "+a.data.data.brunchName:t.form.bankDetils="A/C Type : "+a.data.data.accountType+"<br>A/C Number : "+a.data.data.accountNumber}))},getBankMoreInfo:function(){var t=this;axios.get("/bankAccountMoreInfo/"+this.form.bankAccountId).then((function(a){t.bankInformationAccountInfoStatus=1,t.form.branchName=a.data.data.bankBranch,t.form.accNo=a.data.data.bankAccountNumber;var n="checkBalance/"+a.data.data.accountCode;axios.get(n).then((function(a){t.available_balance_status=!0,t.available_balance_text=a.data.available_balance,t.form.available_balance=a.data.available_balance})),t.form.bankAmount>t.form.available_balance?(t.insufficent_bank_balance_text_status=!1,t.submit_button_status=!0,t.available_button_status=!1):t.insufficent_bank_balance_text_status=!1}))}}},s=n(0),o=Object(s.a)(e,(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("span",[n("div",{staticClass:"card main-card element-block-example mt-5"},[t._m(0),t._v(" "),n("div",{staticClass:"table-responsive bg-white p-3"},[n("table",{staticClass:"table table-hover table-striped table-bordered"},[t._m(1),t._v(" "),n("tbody",t._l(t.billRequestLists,(function(a,e){return n("tr",{key:a.id},[n("td",[t._v(t._s(e+1))]),t._v(" "),n("td",[t._v("\n                "+t._s(a.shopSNo)+"\n                "),n("br"),t._v("\n                "+t._s(a.ShopUserName)+"\n                 ")]),t._v(" "),n("td",[t._v("\n                "+t._s(a.ShopBillAmount)+"\n                "),n("br"),t._v("\n                "+t._s(a.ShopBillDate)+"\n                 ")]),t._v(" "),n("td",[t._v(t._s(a.totalMonth)+" Month")]),t._v(" "),n("td",[t._v(t._s(a.amount))]),t._v(" "),n("td",{domProps:{innerHTML:t._s(a.bankDetils)}}),t._v(" "),n("td",[1==a.bankTypeEntryId?n("span",[t._v("\n                Bank Name : "+t._s(a.bankName)+" "),n("br"),t._v("\n                A/C Name : "+t._s(a.accountName)),n("br"),t._v("\n                A/C Number : "+t._s(a.accountNumber)),n("br"),t._v("\n                Branch Name : "+t._s(a.branchName)),n("br"),t._v(" "),t._v("\n                Pay Slip : "),n("a",{attrs:{href:a.paySlip,target:"_blank"}},[n("img",{staticStyle:{width:"100px"},attrs:{src:a.paySlip}})])]):t._e(),t._v(" "),2==a.bankTypeEntryId?n("span",[t._v("\n                A/C Number : "+t._s(a.mbAccountNo)+" "),n("br"),t._v("\n                TRX. Number : "+t._s(a.mbTrNo)+"\n              ")]):t._e()]),t._v(" "),n("td",[t._v(" \n                "+t._s(a.submitTime)+" "),n("br"),t._v("\n                "+t._s(a.submitDate)+"\n                 ")]),t._v(" "),n("td",[t.loading?n("button",{staticClass:"btn btn-primary mb-5"},[n("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                 Approve  ")]):n("button",{staticClass:"btn btn-primary mb-5",on:{click:function(n){return t.billApprove(a.id)}}},[t._m(2,!0),t._v("\n                 Approve  ")]),t._v(" "),n("button",{staticClass:"btn btn-danger mb-5",on:{click:function(n){return t.billCencle(a.id)}}},[t._v(" Cencle ")])])])})),0)])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"card-header alert-info"},[a("h3",[this._v("Bill Request List")])])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("thead",[n("tr",{staticClass:"alert-info"},[n("th",[t._v("SN")]),t._v(" "),n("th",[t._v("Shop Info")]),t._v(" "),n("th",[t._v("Billing Info")]),t._v(" "),n("th",[t._v("Month")]),t._v(" "),n("th",[t._v("Amount")]),t._v(" "),n("th",[t._v("Receiver")]),t._v(" "),n("th",[t._v("Sender")]),t._v(" "),n("th",[t._v("Date")]),t._v(" "),n("th",[t._v("Status")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"mr-2 opacity-7"},[a("i",{staticClass:"fa fa-paper-plane"})])}],!1,null,null,null);a.default=o.exports}}]);